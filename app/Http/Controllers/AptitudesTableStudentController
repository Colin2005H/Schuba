<?php

use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB; 
use App\Http\Controllers\Controller;

class AptitudesTableStudentController extends Controller
{
    public function showListAptitudes()
    {
        // Exemple : récupérer des données depuis la base de données
        $aptitudesList = DB::table('PLO_SEANCE')
            ->join('EVALUER', 'EVALUER.SEA_ID', '=', 'PLO_SEANCE.SEA_ID') // Corrected field
            ->join('PLO_APTITUDE', 'EVALUER.APT_CODE', '=', 'PLO_APTITUDE.APT_CODE')
            ->join('PLO_COMPETENCE', 'PLO_COMPETENCE.CPT_ID', '=', 'PLO_APTITUDE.CPT_ID') // Corrected join
            ->join('PLO_ELEVE', 'PLO_ELEVE.UTI_ID', '=', 'EVALUER.UTI_ID')
            ->join('PLO_UTILISATEUR', 'PLO_UTILISATEUR.UTI_ID', '=', 'PLO_ELEVE.UTI_ID') // Corrected join
            ->select('SEA_ID', 'SEA_DATE_DEB', 'UTI_NOM', 'APT_CODE', 'CPT_ID', 'APT_LIBELLE')
            ->get();

        // Retourner les données à la vue
        return view('aptitudesTableStudent')->with(compact('aptitudesList'));
    }
}
?>